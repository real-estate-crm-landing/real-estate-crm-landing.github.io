System.register(["./vendor-legacy-11a7b592.js","./makeStyle-legacy-0f5d17e5.js","./no_data-legacy-c2680225.js","./MoreTime-legacy-0c4ff69d.js","./firestore-legacy-1734a240.js","./index-legacy-0033a12e.js"],(function(e,a){"use strict";var l,s,t,i,n,r,o,c,d,h,x,p,u,g,m,j,b,f,y,v,C,T,w,S,k,N,P,D,R,z,F,B,I,O,W,E,M,$,L,A,H,V,_,Y,U,q,J,G,K,Q,X,Z,ee,ae,le,se,te;return{setters:[e=>{l=e.j,s=e.f,t=e.R,i=e.r,n=e.B,r=e.s,o=e.a6,c=e.a7,d=e.a8,h=e.a9,x=e.aa,p=e.ab,u=e.ac,g=e.A,m=e.I,j=e.M,b=e.t,f=e.ad,y=e.ae,v=e.af,C=e.ag,T=e.a3,w=e.a4,S=e.$,k=e.J,N=e.ai,P=e.ah,D=e.aj},e=>{R=e.r,z=e.i,F=e.m,B=e.u},e=>{I=e.d,O=e.b,W=e.c,E=e.a,M=e.n,$=e.e,L=e.f,A=e.g,H=e.h},e=>{V=e.d,_=e.a,Y=e.b},e=>{U=e.b,q=e.u,J=e.g,G=e.d,K=e.h,Q=e.o,X=e.e,Z=e.f,ee=e.q,ae=e.i,le=e.l,se=e.j,te=e.k},null],execute:function(){e("default",(function({pageStatus:e}){const{classes:a}=me(),{t:s}=B(),[C,T]=t.useState([]),[w,S]=i.useState(void 0),[k,N]=i.useState({phoneNumber:void 0,name:void 0,status:"all"}),[P,D]=i.useState(""),[R,z]=i.useState(!0),[F,$]=t.useState(0),[L,A]=t.useState(!1),[H,G]=t.useState(void 0),[ie,re]=i.useState(),[oe,ce]=i.useState(null);function de(e){let a=ee(X(Z,"users"),ae("time","desc"));return a="total"==e?ee(a):ee(a,le(H)),se(a,{phoneNumber:k.phoneNumber,name:k.name,status:k.status})}i.useEffect((()=>{e&&N((a=>({...a,status:e})))}),[e]),i.useEffect((()=>{const e=localStorage.getItem("rowsPerpageCalls");e?G(+e):(localStorage.setItem("rowsPerpageCalls","10"),G(10))}),[]),i.useEffect((()=>{(async()=>{if(0!==F){const e=await K(H,w,ie||void 0,k.phoneNumber,k.name,k.status);return ce({...e,data:H<e.data.length?e.data.slice(H):e.data,rawData:H<e.rawData.length?e.rawData.slice(H):e.rawData}),()=>{}}if(H){Q(de("table"),(async e=>{const a=await te(void 0,de("total")),l=e.docs.map((e=>({id:e.id,...e.data()})));ce({data:l,rawData:e.docs,totalElements:a})}))}})()}),[F,H,w,R,k]);const he=oe?.data?.map((e=>{return a=e.id,l=e.isOnTrial,s=e.isPurchased,t=e.isWannaTry,i=e.name,n=e.phoneNumber,r=e.time,o=e.wantToContact,{id:a,name:i,phoneNumber:n,wantToContact:o,time:r,status:{isOnTrial:l,isPurchased:s,isWannaTry:t}};var a,l,s,t,i,n,r,o})),xe=[{id:"name",numeric:!1,disablePadding:!0,label:s("callTableName")},{id:"phoneNumber",numeric:!0,disablePadding:!1,label:s("callTablePhone")},{id:"time",numeric:!0,disablePadding:!1,label:s("callTableTime")},{id:"status",numeric:!0,disablePadding:!1,label:s("callTableStatus")},{id:"wantToContact",numeric:!0,disablePadding:!1,label:s("callPhoneStatus")}],[pe,ue]=t.useState(null),ge=Boolean(pe),fe=e=>{e.stopPropagation(),ue(null),z((e=>!e))};return l.jsx(l.Fragment,{children:l.jsxs(n,{sx:{width:"100%"},children:[l.jsxs(r,{sx:{width:"100%",mb:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[l.jsx(be,{numSelected:C?.length,selectedTitle:s("selectTitle"),tableTitle:s("isOnTrial"==e?"freeTrialTableTitle":"isPurchased"===e?"purchasedTableTitle":"isWannaTry"===e?"interestedTableTitle":"callTableTitle"),deleteSelecteds:()=>{U("users",C),z((e=>!e)),T([])},status:k.status,nameVal:k.name,phoneVal:k.phoneNumber,searchByName:e=>{N((a=>({...a,name:e})))},searchByPhone:e=>{N((a=>({...a,phoneNumber:e})))},searchByStatus:e=>{N((a=>({...a,status:e})))},statusSelected:e},0),he?.length>0?l.jsxs(l.Fragment,{children:[l.jsx(o,{children:l.jsxs(c,{sx:{minWidth:950},"aria-labelledby":"tableTitle",size:L?"small":"medium",children:[l.jsx(je,{numSelected:C?.length,onSelectAllClick:e=>{if(e.target.checked){const e=he?.map((e=>e.id));T(e)}else T([])},rowCount:he?.length,headCells:xe}),l.jsx(d,{children:he?.map(((e,t)=>{const i=(n=e.id,-1!==C.indexOf(n));var n;const r=`enhanced-table-checkbox-${t}`,[o,c,d,f]=s("callTableUserStatuses").split(";");return l.jsxs(h,{hover:!0,onClick:a=>((e,a)=>{const l=C.indexOf(a);let s=[];-1===l?s=s.concat(C,a):0===l?s=s.concat(C.slice(1)):l===C?.length-1?s=s.concat(C.slice(0,-1)):l>0&&(s=s.concat(C.slice(0,l),C.slice(l+1))),T(s)})(0,e.id),role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,sx:{cursor:"pointer"},className:e?.wantToContact?a.needToCall:a.alreadyCalled,children:[l.jsx(x,{padding:"checkbox",children:l.jsx(p,{color:"primary",checked:i,inputProps:{"aria-labelledby":r}})}),l.jsx(x,{component:"th",id:r,scope:"row",padding:"none",children:e.name}),l.jsx(x,{align:"right",children:l.jsx("a",{href:`tel:${e.phoneNumber}`,onClick:a=>{a.stopPropagation(),q(e.id),z((e=>!e))},children:e.phoneNumber})}),l.jsxs(x,{align:"right",children:[I(new Date(e.time),"HH:MM:ss")," ",l.jsx("br",{}),I(new Date(e.time),"mm/dd/yyyy")]}),l.jsxs(x,{align:"right",children:[e.status.isOnTrial?l.jsx(u,{className:a.freeTrialChip,label:l.jsxs(g,{className:a.typography,children:[l.jsx(V,{}),o]})}):e.status.isPurchased?l.jsx(u,{className:a.purchasedChip,label:l.jsxs(g,{className:a.typography,children:[l.jsx(_,{}),c]})}):e.status.isWannaTry?l.jsx(u,{className:a.wannaTryChip,label:l.jsxs(g,{className:a.typography,children:[l.jsx(Y,{}),d]})}):l.jsx(u,{className:a.noStatusChip,label:l.jsxs(g,{className:a.typography,children:[l.jsx(O,{}),f]})}),l.jsx(m,{"aria-label":"more",id:"long-button","aria-controls":ge?"long-menu":void 0,"aria-expanded":ge?"true":void 0,"aria-haspopup":"true",onClick:a=>((e,a)=>{e.stopPropagation(),D(a),ue(e.currentTarget)})(a,e.id),children:l.jsx(W,{})}),l.jsxs(j,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:pe,open:ge,onClose:fe,PaperProps:{style:{width:"20ch"}},children:[l.jsxs(b,{onClick:e=>{fe(e),J(P,"trial").then((e=>console.log(e))),console.log("fre trial clicked")},children:[l.jsx(V,{sx:{marginRight:"5px"}}),o]},1),l.jsxs(b,{onClick:e=>{fe(e),J(P,"purchased")},children:[l.jsx(_,{sx:{marginRight:"5px"}}),c]},2),l.jsxs(b,{onClick:e=>{fe(e),J(P,"wannaTry")},children:[l.jsx(Y,{sx:{marginRight:"5px"}}),d]},3),l.jsxs(b,{onClick:e=>{fe(e),J(P,void 0)},children:[l.jsx(O,{sx:{marginRight:"5px"}}),f]},4)]})]}),l.jsx(x,{align:"right",children:e.wantToContact?l.jsx("a",{href:`tel:${e.phoneNumber}`,onClick:a=>{a.stopPropagation(),q(e.id),z((e=>!e))},children:l.jsx(u,{className:a.purchasedChip,label:l.jsxs(g,{className:a.typography,children:[l.jsx(E,{}),s("callTablePhoneActive")]})})}):l.jsx(u,{className:a.noStatusChip,label:l.jsxs(g,{className:a.typography,children:[l.jsx(ne,{}),s("callTablePhoneDisactive")]})})})]},t)}))})]})}),l.jsx(f,{rowsPerPageOptions:[5,10,25,50],component:"div",sx:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"flex-end",".css-78c6dr-MuiToolbar-root-MuiTablePagination-toolbar":{display:"flex",justifyContent:"flex-end",flexWrap:"wrap"}},count:oe?.totalElements,rowsPerPage:H??10,page:F,onPageChange:(e,a)=>{S(0===a?void 0:a>F?"forward":"back"),re(oe?.rawData?.[oe?.rawData?.length-1]),$(a)},onRowsPerPageChange:e=>{localStorage.setItem("rowsPerpageCalls",e.target.value??"10"),G(parseInt(e.target.value,10)),$(0)}})]}):l.jsx("img",{src:M,alt:"no-data-img",className:a.noDataImg,loading:"lazy"})]}),l.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[l.jsx(y,{control:l.jsx(v,{checked:L,onChange:e=>{A(e.target.checked)}}),label:s("densePadding")}),l.jsx("h4",{onClick:()=>z((e=>!e)),className:a.reloader,children:s("reloadTable")})]})]})})}));var a={},ie=z;Object.defineProperty(a,"__esModule",{value:!0});var ne=a.default=void 0,re=ie(R()),oe=l,ce=(0,re.default)((0,oe.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll");ne=a.default=ce;var de={},he=z;Object.defineProperty(de,"__esModule",{value:!0});var xe=de.default=void 0,pe=he(R()),ue=l,ge=(0,pe.default)((0,ue.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList");xe=de.default=ge;const me=F()((e=>({root:{background:e.palette.background.default},h2:{fontSize:"20px"},freeTrialChip:{marginRight:"5px",color:"#ffd900",border:"1px solid #ffd900",backgroundColor:s("#ffd900",.2)},purchasedChip:{marginRight:"5px",color:"#008000",border:"1px solid #008000",backgroundColor:s("#008000",.2)},noStatusChip:{marginRight:"5px",color:"#808080",border:"1px solid #808080",backgroundColor:s("#808080",.2)},wannaTryChip:{marginRight:"5px",color:"#FF0000",border:"1px solid #FF0000",backgroundColor:s("#FF0000",.2)},typography:{width:"auto",display:"flex",alignItems:"center",gap:"5px",fontSize:"16px"},reloader:{color:e.palette.primary.main,textDecoration:"underline",cursor:"pointer"},needToCall:{backgroundColor:s("#008000",.2)},alreadyCalled:{},popper:{position:"absolute",borderRadius:"8px",border:`1.5px solid ${e.palette.primary.main}`,height:"150px",overflowY:"scroll",width:"250px",transform:"translateY(-10%)",zIndex:11111111,"&::-webkit-scrollbar":{width:"6px",borderRadius:"15px"},"&::-webkit-scrollbar-track":{background:"rgb(231, 230, 230)",borderRadius:"15px"},"&::-webkit-scrollbar-thumb":{background:"white",borderRadius:"15px"},"&:hover":{"&::-webkit-scrollbar-thumb":{background:"rgb(147, 147, 147)"},"&::-webkit-scrollbar-track":{background:"#f1f1f1"}}},popperOpen:{visibility:"visible",position:"absolute",opacity:"1",transition:"400ms ease",transform:"translateY(0)"},popperClose:{position:"absolute",visibility:"hidden",opacity:"0",transition:"400ms ease",transform:"translateY(-10%)"},noDataImg:{width:"350px",height:"auto",aspectRatio:"1/1",margin:"auto"},noDataImgFull:{height:"100%",width:"auto",aspectRatio:"1/1",marginLeft:"50px"}})));function je(e){const{onSelectAllClick:a,numSelected:s,rowCount:t,headCells:i}=e;return l.jsx(C,{children:l.jsxs(h,{children:[l.jsx(x,{padding:"checkbox",children:l.jsx(p,{color:"primary",indeterminate:s>0&&s<t,checked:t>0&&s===t,onChange:a,inputProps:{"aria-label":"select all desserts"}})}),i?.map((e=>l.jsx(x,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",children:e.label},e.id)))]})})}function be(e){const{t:a}=B(),{classes:o}=me(),{numSelected:c,tableTitle:d,selectedTitle:h,deleteSelecteds:x,nameVal:p,phoneVal:j,searchByName:f,searchByPhone:y,searchByStatus:v,status:C,statusSelected:R}=e,[z,F]=i.useState(""),[I,W]=i.useState(""),[E,U]=i.useState(null),[q,J]=i.useState(null),[K,ee]=i.useState(void 0),[ae,le]=i.useState(void 0),[se,te]=t.useState(null),[ie,ne,re,oe,ce,de]=a("callTableUserStatuses").split(";"),he=Boolean(q),pe=Boolean(E),ue=()=>{te(null)},ge=Boolean(se),je=ge?"simple-popover":void 0;function be(){const e=X(Z,"contactsName");Q(e,(e=>{const a=e.docs[0].data().values.split(";");ee(a)}))}function fe(){const e=X(Z,"contactsPhone");Q(e,(e=>{const a=e.docs[0].data().values.split(";");le(a)}))}function ye(e,a){return e?.filter((e=>e.includes(a??"")&&e.length>0))}return i.useEffect((()=>{0===z?.length&&f(void 0)}),[z]),i.useEffect((()=>{0===I?.length&&y(void 0)}),[I]),i.useEffect((()=>{F(p)}),[p]),i.useEffect((()=>{W(j)}),[j]),i.useEffect((()=>(be(),fe(),()=>{be(),fe()})),[]),l.jsxs(T,{sx:{width:"100%",pl:{sm:2},pr:{xs:1,sm:1},...c>0&&{bgcolor:e=>s(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[c>0?l.jsxs(g,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[c," ",h]}):l.jsx(g,{sx:{flex:"1 1 100%",fontSize:"20px"},variant:"h6",id:"tableTitle",component:"div",children:d}),c>0?l.jsx(w,{title:"Delete",children:l.jsx(m,{onClick:x,children:l.jsx($,{})})}):ge?l.jsx(w,{title:"Filter list",children:l.jsx(m,{"aria-describedby":je,onClick:ue,children:l.jsx(G,{})})}):l.jsx(w,{title:"Filter list",children:l.jsx(m,{"aria-describedby":je,onClick:e=>{te(e.currentTarget)},children:l.jsx(xe,{})})}),l.jsx(S,{id:je,open:ge,anchorEl:se,onClose:ue,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:l.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:"20px",padding:"10px"},children:[l.jsx(g,{sx:{textAlign:"center"},children:a("filterName")}),l.jsxs(n,{sx:{position:"relative"},children:[l.jsx(k,{id:"searchByPhone",label:a("searchByPhone"),variant:"outlined",value:I,onChange:e=>W(e.target.value),onClick:e=>{J(e.currentTarget)},onBlur:()=>{J(null)}}),l.jsx(r,{className:`${o.popper} ${he?o.popperOpen:o.popperClose}`,children:ye(ae,I)&&ye(ae,I)?.length>0?ye(ae,I)?.map(((e,a)=>e.length>1?l.jsx(l.Fragment,{children:l.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:"10px",width:"100%",borderBottom:"1px solid grey"},onClick:()=>{y(e),W(e)},children:[l.jsx(L,{fontSize:"medium"}),l.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[l.jsx(g,{sx:{fontSize:"14px",fontWeight:"bold"},children:e}),l.jsx(g,{sx:{fontSize:"12px",color:"gray"},children:ye(K,z)?ye(K,z)[a]:null})]})]},a)}):l.jsx("div",{},a))):l.jsx(l.Fragment,{children:l.jsx("img",{src:M,alt:"no-data-img",className:o.noDataImgFull,loading:"lazy"})})})]}),l.jsxs(n,{sx:{position:"relative"},children:[l.jsx(k,{id:"searchByName",label:a("searchByName"),variant:"outlined",value:z,onChange:e=>F(e.target.value),onClick:e=>{U(e.currentTarget)},onBlur:()=>{U(null)}}),l.jsx(r,{className:`${o.popper} ${pe?o.popperOpen:o.popperClose}`,children:ye(K,z)?.length>0?ye(K,z)?.map(((e,a)=>e.length>1?l.jsx(l.Fragment,{children:l.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:"10px",width:"100%",borderBottom:"1px solid grey"},onClick:()=>{f(e),F(e)},children:[l.jsx(L,{fontSize:"medium"}),l.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[l.jsx(g,{sx:{fontSize:"14px",fontWeight:"bold"},children:e}),l.jsx(g,{sx:{fontSize:"12px",color:"gray"},children:ye(ae,I)&&ye(ae,I)[a]})]})]},a)}):l.jsx("div",{},a))):l.jsx(l.Fragment,{children:l.jsx("img",{src:M,alt:"no-data-img",className:o.noDataImgFull,loading:"lazy"})})})]}),l.jsxs(n,{sx:{minWidth:120,minHeight:"150px"},children:[R&&"all"!==R?l.jsxs(l.Fragment,{children:[l.jsx(N,{id:"demo-simple-select-label",children:"Status:"}),l.jsx("br",{})]}):null,R&&"all"!==R?l.jsx(l.Fragment,{children:"isOnTrial"==R?l.jsx(u,{className:o.freeTrialChip,label:l.jsxs(g,{className:o.typography,children:[l.jsx(V,{}),ie]})}):"isPurchased"==R?l.jsx(u,{className:o.purchasedChip,label:l.jsxs(g,{className:o.typography,children:[l.jsx(_,{}),ne]})}):"isWannaTry"==R?l.jsx(u,{className:o.wannaTryChip,label:l.jsxs(g,{className:o.typography,children:[l.jsx(Y,{}),re]})}):null}):l.jsxs(P,{fullWidth:!0,children:[l.jsxs(N,{id:"demo-simple-select-label",children:[a("status"),":"]}),l.jsxs(D,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:C,onChange:e=>{v(e.target.value)},children:[l.jsxs(b,{value:"all",children:[l.jsx(A,{sx:{marginRight:"5px"}}),de]},0),l.jsxs(b,{value:"wantToContact",children:[l.jsx(H,{sx:{marginRight:"5px"}}),ce]},1),l.jsxs(b,{value:"isOnTrial",children:[l.jsx(V,{sx:{marginRight:"5px"}}),ie]},2),l.jsxs(b,{value:"isPurchased",children:[l.jsx(_,{sx:{marginRight:"5px"}}),ne]},3),l.jsxs(b,{value:"isWannaTry",children:[l.jsx(Y,{sx:{marginRight:"5px"}}),re]},4),l.jsxs(b,{value:"noStatus",children:[l.jsx(O,{sx:{marginRight:"5px"}}),oe]},5)]})]})]})]})})]})}}}}));
