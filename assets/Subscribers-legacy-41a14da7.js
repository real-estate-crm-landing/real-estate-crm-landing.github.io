System.register(["./vendor-legacy-cbfbf869.js","./createSvgIcon-legacy-9c5229e2.js","./no_data-legacy-8de02455.js","./MoreTime-legacy-36c69e30.js","./firestore-legacy-871838d1.js","./index-legacy-0033a12e.js"],(function(e,a){"use strict";var t,l,s,i,n,r,o,c,d,x,h,u,p,g,m,b,j,f,y,v,S,k,w,C,P,T,B,N,I,D,F,R,z,E,A,O,W,M,$,_,V,Y,H,L,q,U,X,G,J,K;return{setters:[e=>{t=e.f,l=e.R,s=e.r,i=e.j,n=e.B,r=e.q,o=e.a3,c=e.a4,d=e.a5,x=e.a6,h=e.a7,u=e.a8,p=e.a9,g=e.i,m=e.I,b=e.n,j=e.M,f=e.aa,y=e.ab,v=e.ac,S=e.ad,k=e.a0,w=e.a1,C=e.X,P=e.m,T=e.ae,B=e.af,N=e.ag},e=>{I=e.m,D=e.u},e=>{F=e.d,R=e.a,z=e.b,E=e.c,A=e.n,O=e.e,W=e.f,M=e.g,$=e.h},e=>{_=e.b,V=e.d,Y=e.a},e=>{H=e.b,L=e.u,q=e.c,U=e.d,X=e.r,G=e.e,J=e.f,K=e.o},null],execute:function(){e("default",(function(){const{classes:e}=a(),{t:t}=D(),[S,k]=l.useState([]),[w,C]=s.useState(void 0),[P,T]=s.useState({phoneNumber:void 0,name:void 0,status:void 0}),[B,N]=s.useState(""),[I,O]=s.useState(!0),[W,M]=l.useState(0),[$,V]=l.useState(!1),[Y,U]=l.useState(void 0),[G,J]=s.useState(),[K,ee]=s.useState(null);s.useEffect((()=>{const e=localStorage.getItem("rowsPerpageCalls");e?U(+e):(localStorage.setItem("rowsPerpageCalls","10"),U(10))}),[]),s.useEffect((()=>{(async()=>{const e=await X(Y,w,G||void 0,P.phoneNumber,P.name,P.status);ee((()=>({...e,data:e.data,rawData:e.rawData})))})()}),[W,Y,w,I,P]);const ae=K?.data?.map((e=>{return a=e.id,t=e.isActive,l=e.isBlocked,s=e.name,i=e.email,n=e.time,{id:a,name:s,email:i,time:n,status:{isActive:t,isBlocked:l}};var a,t,l,s,i,n})),te=[{id:"name",numeric:!1,disablePadding:!0,label:t("callTableName")},{id:"email",numeric:!0,disablePadding:!1,label:t("callTableEmail")},{id:"time",numeric:!0,disablePadding:!1,label:t("callTableTime")},{id:"status",numeric:!0,disablePadding:!1,label:t("callTableEmailStatus")}],[le,se]=l.useState(null),ie=Boolean(le),ne=e=>{e.stopPropagation(),se(null),O((e=>!e))};return i.jsx(i.Fragment,{children:i.jsxs(n,{sx:{width:"100%"},children:[i.jsxs(r,{sx:{width:"100%",mb:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[i.jsx(Z,{numSelected:S?.length,selectedTitle:t("selectTitle"),tableTitle:t("emailsTableTitle"),deleteSelecteds:()=>{H("users",S),O((e=>!e))},status:P.status,nameVal:P.name,phoneVal:P.phoneNumber,searchByName:e=>{T((a=>({...a,name:e})))},searchByPhone:e=>{T((a=>({...a,phoneNumber:e})))},searchByStatus:e=>{T((a=>({...a,status:e})))}}),ae?.length>0?i.jsxs(i.Fragment,{children:[i.jsx(o,{children:i.jsxs(c,{sx:{minWidth:700},"aria-labelledby":"tableTitle",size:$?"small":"medium",children:[i.jsx(Q,{numSelected:S?.length,onSelectAllClick:e=>{if(e.target.checked){const e=ae?.map((e=>e.id));k(e)}else k([])},rowCount:ae?.length,headCells:te}),i.jsx(d,{children:ae?.map(((a,l)=>{const s=(n=a.id,-1!==S.indexOf(n));var n;const r=`enhanced-table-checkbox-${l}`;return i.jsxs(x,{hover:!0,onClick:e=>((e,a)=>{const t=S.indexOf(a);let l=[];-1===t?l=l.concat(S,a):0===t?l=l.concat(S.slice(1)):t===S?.length-1?l=l.concat(S.slice(0,-1)):t>0&&(l=l.concat(S.slice(0,t),S.slice(t+1))),k(l)})(0,a.id),role:"checkbox","aria-checked":s,tabIndex:-1,selected:s,sx:{cursor:"pointer"},className:a?.status.isBlocked?e.blocked_row:e.usual_row,children:[i.jsx(h,{padding:"checkbox",children:i.jsx(u,{color:"primary",checked:s,inputProps:{"aria-labelledby":r}})}),i.jsx(h,{component:"th",id:r,scope:"row",padding:"none",children:a.name}),i.jsx(h,{align:"right",children:i.jsx("a",{href:`mailto:${a.email}`,onClick:e=>{e.stopPropagation(),L(a.id),O((e=>!e))},children:a.email})}),i.jsxs(h,{align:"right",children:[F(new Date(a.time),"HH:MM:ss")," ",i.jsx("br",{}),F(new Date(a.time),"mm/dd/yyyy")]}),i.jsxs(h,{align:"right",children:[a.status.isActive?i.jsx(p,{className:e.purchasedChip,label:i.jsxs(g,{className:e.typography,children:[i.jsx(R,{}),t("subscriberStatusActive")]})}):a.status.isBlocked?i.jsx(p,{className:e.wannaTryChip,label:i.jsxs(g,{className:e.typography,children:[i.jsx(_,{}),t("subscriberStatusBlocked")]})}):i.jsx(p,{className:e.noStatusChip,label:i.jsxs(g,{className:e.typography,children:[i.jsx(z,{}),"No Status"]})}),i.jsx(m,{"aria-label":"more",id:"long-button","aria-controls":ie?"long-menu":void 0,"aria-expanded":ie?"true":void 0,"aria-haspopup":"true",onClick:e=>((e,a)=>{e.stopPropagation(),N(a),se(e.currentTarget)})(e,a.id),children:i.jsx(E,{})}),i.jsxs(b,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:le,open:ie,onClose:ne,PaperProps:{style:{width:"20ch"}},children:[i.jsxs(j,{onClick:e=>{ne(e),q(B,"isBlocked")},children:[i.jsx(_,{sx:{marginRight:"5px"}}),t("subscriberStatusBlocked")]},3),i.jsxs(j,{onClick:e=>{ne(e),q(B,"isActive")},children:[i.jsx(R,{}),t("subscriberStatusActive")]},4)]})]})]},a.id)}))})]})}),i.jsx(f,{rowsPerPageOptions:[5,10,25,50],component:"div",sx:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"flex-end",".css-78c6dr-MuiToolbar-root-MuiTablePagination-toolbar":{display:"flex",justifyContent:"flex-end",flexWrap:"wrap"}},count:K?.totalElements,rowsPerPage:Y??10,page:W,onPageChange:(e,a)=>{C(0===a?void 0:a>W?"forward":"back"),J(0===a?void 0:K?.rawData?.[K?.rawData?.length-1]),M(a)},onRowsPerPageChange:e=>{localStorage.setItem("rowsPerpageCalls",e.target.value??"10"),U(parseInt(e.target.value,10)),M(0)}})]}):i.jsx("img",{src:A,alt:"no-data-img",className:e.noDataImg,loading:"lazy"})]}),i.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[i.jsx(y,{control:i.jsx(v,{checked:$,onChange:e=>{V(e.target.checked)}}),label:"Dense padding"}),i.jsx("h4",{onClick:()=>O((e=>!e)),className:e.reloader,children:t("reloadTable")})]})]})})}));const a=I()((e=>({root:{background:e.palette.background.default},h2:{fontSize:"20px"},freeTrialChip:{marginRight:"5px",color:"#ffd900",border:"1px solid #ffd900",backgroundColor:t("#ffd900",.2)},purchasedChip:{marginRight:"5px",color:"#008000",border:"1px solid #008000",backgroundColor:t("#008000",.2)},noStatusChip:{marginRight:"5px",color:"#808080",border:"1px solid #808080",backgroundColor:t("#808080",.2)},wannaTryChip:{marginRight:"5px",color:"#FF0000",border:"1px solid #FF0000",backgroundColor:t("#FF0000",.2)},typography:{width:"auto",display:"flex",alignItems:"center",gap:"5px",fontSize:"16px"},reloader:{color:e.palette.primary.main,textDecoration:"underline",cursor:"pointer"},blocked_row:{backgroundColor:t("#FF0000",.2)},usual_row:{},popper:{position:"absolute",borderRadius:"8px",border:`1.5px solid ${e.palette.primary.main}`,height:"150px",overflowY:"scroll",width:"250px",transform:"translateY(-10%)",zIndex:11111111,"&::-webkit-scrollbar":{width:"6px","border-radius":"15px"},"&::-webkit-scrollbar-track":{background:"rgb(231, 230, 230)","border-radius":"15px"},"&::-webkit-scrollbar-thumb":{background:"white","border-radius":"15px"},"&:hover":{"&::-webkit-scrollbar-thumb":{background:"rgb(147, 147, 147)"},"&::-webkit-scrollbar-track":{background:"#f1f1f1"}}},popperOpen:{visibility:"visible",position:"absolute",opacity:"1",transition:"400ms ease",transform:"translateY(0)"},popperClose:{position:"absolute",visibility:"hidden",opacity:"0",transition:"400ms ease",transform:"translateY(-10%)"},noDataImg:{width:"350px",height:"auto",aspectRatio:"1/1",margin:"auto"},noDataImgFull:{height:"100%",width:"auto",aspectRatio:"1/1",marginLeft:"50px"}})));function Q(e){const{onSelectAllClick:a,numSelected:t,rowCount:l,headCells:s}=e;return i.jsx(S,{children:i.jsxs(x,{children:[i.jsx(h,{padding:"checkbox",children:i.jsx(u,{color:"primary",indeterminate:t>0&&t<l,checked:l>0&&t===l,onChange:a,inputProps:{"aria-label":"select all desserts"}})}),s?.map((e=>i.jsx(h,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",children:e.label},e.id)))]})})}function Z(e){const{t:o}=D(),{classes:c}=a(),{numSelected:d,tableTitle:x,selectedTitle:h,deleteSelecteds:u,nameVal:p,phoneVal:b,searchByName:f,searchByPhone:y,searchByStatus:v,status:S}=e,[I,F]=s.useState(""),[R,E]=s.useState(""),[H,L]=s.useState(null),[q,X]=s.useState(null),[Q,Z]=s.useState(void 0),[ee,ae]=s.useState(void 0),[te]=l.useState(null),[le,se,ie,ne,re,oe]=o("callTableUserStatuses").split(";"),ce=Boolean(q),de=Boolean(H),xe=Boolean(te),he=xe?"simple-popover":void 0;function ue(){const e=G(J,"contactsName");K(e,(e=>{const a=e.docs[0].data().values.split(";");Z(a)}))}function pe(){const e=G(J,"contactsPhone");K(e,(e=>{const a=e.docs[0].data().values.split(";");ae(a)}))}function ge(e,a){return e?.filter((e=>e.includes(a??"")&&e.length>0))}return s.useEffect((()=>{0===I?.length&&f(void 0)}),[I]),s.useEffect((()=>{0===R?.length&&y(void 0)}),[R]),s.useEffect((()=>{F(p)}),[p]),s.useEffect((()=>{E(b)}),[b]),s.useEffect((()=>(ue(),pe(),()=>{ue(),pe()})),[]),i.jsxs(k,{sx:{width:"100%",pl:{sm:2},pr:{xs:1,sm:1},...d>0&&{bgcolor:e=>t(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[d>0?i.jsxs(g,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[d," ",h]}):i.jsx(g,{sx:{flex:"1 1 100%",fontSize:"20px"},variant:"h6",id:"tableTitle",component:"div",children:x}),d>0?i.jsx(w,{title:"Delete",children:i.jsx(m,{onClick:u,children:i.jsx(O,{})})}):xe?i.jsx(w,{title:"Filter list",children:i.jsx(m,{"aria-describedby":he,children:i.jsx(U,{})})}):null,i.jsx(C,{id:he,open:xe,anchorEl:te,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:i.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:"20px",padding:"10px"},children:[i.jsx(g,{sx:{textAlign:"center"},children:o("filterName")}),i.jsxs(n,{sx:{position:"relative"},children:[i.jsx(P,{id:"searchByPhone",label:o("searchByPhone"),variant:"outlined",value:R,onChange:e=>E(e.target.value),onClick:e=>{X(e.currentTarget)},onBlur:()=>{X(null)}}),i.jsx(r,{className:`${c.popper} ${ce?c.popperOpen:c.popperClose}`,children:ge(ee,R)?.length>0?ge(ee,R)?.map(((e,a)=>e.length>1?i.jsx(i.Fragment,{children:i.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:"10px",width:"100%",borderBottom:"1px solid grey"},onClick:()=>{y(e),E(e)},children:[i.jsx(W,{fontSize:"medium"}),i.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[i.jsx(g,{sx:{fontSize:"14px",fontWeight:"bold"},children:e}),i.jsx(g,{sx:{fontSize:"12px",color:"gray"},children:ge(Q,I)&&ge(Q,I)[a]})]})]},e)}):null)):i.jsx(i.Fragment,{children:i.jsx("img",{src:A,alt:"no-data-img",className:c.noDataImgFull,loading:"lazy"})})})]}),i.jsxs(n,{sx:{position:"relative"},children:[i.jsx(P,{id:"searchByName",label:o("searchByName"),variant:"outlined",value:I,onChange:e=>F(e.target.value),onClick:e=>{L(e.currentTarget)},onBlur:()=>{L(null)}}),i.jsx(r,{className:`${c.popper} ${de?c.popperOpen:c.popperClose}`,children:ge(Q,I)?.length>0?ge(Q,I)?.map(((e,a)=>e.length>1?i.jsx(i.Fragment,{children:i.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:"10px",width:"100%",borderBottom:"1px solid grey"},onClick:()=>{f(e),F(e)},children:[i.jsx(W,{fontSize:"medium"}),i.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[i.jsx(g,{sx:{fontSize:"14px",fontWeight:"bold"},children:e}),i.jsx(g,{sx:{fontSize:"12px",color:"gray"},children:ge(ee,R)&&ge(ee,R)[a]})]})]},e)}):null)):i.jsx(i.Fragment,{children:i.jsx("img",{src:A,alt:"no-data-img",className:c.noDataImgFull,loading:"lazy"})})})]}),i.jsx(n,{sx:{minWidth:120,minHeight:"150px"},children:i.jsxs(T,{fullWidth:!0,children:[i.jsx(B,{id:"demo-simple-select-label",children:"Status:"}),i.jsxs(N,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:S,onChange:e=>{v(e.target.value)},children:[i.jsxs(j,{value:"all",children:[i.jsx(M,{sx:{marginRight:"5px"}}),oe]},0),i.jsxs(j,{value:"wantToContact",children:[i.jsx($,{sx:{marginRight:"5px"}}),re]},1),i.jsxs(j,{value:"isOnTrial",children:[i.jsx(V,{sx:{marginRight:"5px"}}),le]},2),i.jsxs(j,{value:"isPurchased",children:[i.jsx(Y,{sx:{marginRight:"5px"}}),se]},3),i.jsxs(j,{value:"isWannaTry",children:[i.jsx(_,{sx:{marginRight:"5px"}}),ie]},4),i.jsxs(j,{value:"noStatus",children:[i.jsx(z,{sx:{marginRight:"5px"}}),ne]},5)]})]})})]})})]})}}}}));
